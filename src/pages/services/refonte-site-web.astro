---
import '../../styles/global.css';
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';

// Import SVG pour surlignement
import arrowUnderline from '../../assets/arrow-3.svg';

// Import image hero
import refonteHero from '../../assets/services/refonte1.webp';

// Import background components
import BackgroundGlitchGrid from '../../components/backgrounds/BackgroundGlitchGrid.astro';
import BackgroundProgressFlow from '../../components/backgrounds/BackgroundProgressFlow.astro';
import BackgroundCircuitBoard from '../../components/backgrounds/BackgroundCircuitBoard.astro';
import BackgroundQuestionMarks from '../../components/backgrounds/BackgroundQuestionMarks.astro';
import BackgroundMapContours from '../../components/backgrounds/BackgroundMapContours.astro';

// SEO Data
const seoData = {
    title: "Refonte de site web Genève | Jon Labs - Site moderne en 3 semaines",
    description: "Refonte de site web à Genève. Design moderne, ultra-rapide, optimisé SEO. Stack Astro/Tailwind. Devis transparent. Contact : Jon Labs"
};

// Service schema for SEO - must be an array for getServiceSchema()
const serviceSchema = [
    {
        title: "Refonte de site web",
        description: "Refonte complète de site web à Genève. Design moderne, ultra-rapide, optimisé SEO. Stack Astro/Tailwind. À partir de 750 CHF."
    }
];

// Pain points data
const painPoints = [
    {
        icon: "ri-palette-line",
        title: "Design qui fait 2010",
        description: "Vos visiteurs partent en 3 secondes. Première impression = dernière impression."
    },
    {
        icon: "ri-search-line",
        title: "Invisible sur Google",
        description: "Site invisible = business invisible. Même vos clients ne vous trouvent pas."
    },
    {
        icon: "ri-lock-2-line",
        title: "Impossible à modifier",
        description: "Changer une photo = attendre 2 semaines + facture. Inacceptable."
    },
    {
        icon: "ri-bug-line",
        title: "Piraté ou vulnérable",
        description: "WordPress mal maintenu = porte ouverte aux hackers. Votre réputation en jeu."
    },
    {
        icon: "ri-smartphone-line",
        title: "Rame sur mobile",
        description: "70% de vos visiteurs sont sur téléphone. 2 secondes = ils sont partis."
    },
    {
        icon: "ri-money-euro-circle-line",
        title: "Maintenance trop chère",
        description: "Hébergement + plugins + mises à jour + sécurité = factures qui s'empilent."
    }
];

// Methodology steps
const methodSteps = [
    {
        week: "Semaine 1",
        title: "Audit & Stratégie",
        tasks: [
            "Analyse de votre site actuel",
            "Recherche mots-clés locaux",
            "Définition des objectifs"
        ],
        deliverable: "Document stratégique + wireframes"
    },
    {
        week: "Semaine 2",
        title: "Design & Contenu",
        tasks: [
            "Design moderne sur-mesure",
            "Optimisation contenu SEO",
            "Architecture d'information"
        ],
        deliverable: "Maquettes validées + contenus"
    },
    {
        week: "Semaine 3",
        title: "Développement & Lancement",
        tasks: [
            "Code propre et rapide",
            "Optimisation vitesse (90+)",
            "Formation modification"
        ],
        deliverable: "Site live + accès + documentation"
    }
];

// Differentiators
const differentiators = [
    {
        icon: "ri-code-s-slash-line",
        title: "Stack moderne",
        description: "Astro/Tailwind. Site 10x plus rapide, 100x plus sécurisé, 0 plugin."
    },
    {
        icon: "ri-edit-line",
        title: "Modification facile",
        description: "Changer du texte ? Un fichier suffit. Pas besoin de me rappeler."
    },
    {
        icon: "ri-map-pin-line",
        title: "SEO local intégré",
        description: "Optimisation Genève/Suisse romande dès le jour 1. Pas un extra payant."
    },
    {
        icon: "ri-user-line",
        title: "Un interlocuteur",
        description: "Moi (Jon) du début à la fin. Pas 5 personnes différentes."
    }
];

// Before/After results
const results = [
    {
        metric: "Temps de chargement",
        before: "5-8 secondes",
        after: "< 1 seconde",
        impact: "+40% de visiteurs restent",
        icon: "ri-speed-line"
    },
    {
        metric: "Position Google",
        before: "Page 2-3",
        after: "Position 1-3",
        impact: "Vos clients vous trouvent",
        icon: "ri-search-eye-line"
    },
    {
        metric: "Responsive mobile",
        before: "Cassé ou lent",
        after: "Parfait tous écrans",
        impact: "+60% engagement mobile",
        icon: "ri-smartphone-line"
    },
    {
        metric: "Modifications",
        before: "Impossible sans dev",
        after: "Vous modifiez vous-même",
        impact: "-2'000 CHF/an économisés",
        icon: "ri-pencil-line"
    },
    {
        metric: "Sécurité",
        before: "Vulnérable (WordPress)",
        after: "Béton armé (static)",
        impact: "0 piratage, 0 stress",
        icon: "ri-shield-check-line"
    },
    {
        metric: "Coût maintenance",
        before: "100-300 CHF/mois",
        after: "0-50 CHF/mois",
        impact: "-1'800 CHF/an économisés",
        icon: "ri-wallet-line"
    }
];

// Tech options
const techOptions = [
    {
        type: "Site vitrine simple",
        solution: "No-code moderne",
        benefit: "Autonomie maximale",
        icon: "ri-layout-line"
    },
    {
        type: "Design sur-mesure",
        solution: "Webflow",
        benefit: "Créativité sans limites",
        icon: "ri-paint-brush-line"
    },
    {
        type: "Site contenu riche",
        solution: "Astro",
        benefit: "Performance SEO ultime",
        icon: "ri-rocket-line"
    }
];

// Guarantees
const guarantees = [
    { icon: "ri-speed-line", title: "Rapidité", description: "Site charge en < 1 seconde" },
    { icon: "ri-shield-check-line", title: "Sécurité", description: "Zéro faille, zéro piratage" },
    { icon: "ri-pencil-ruler-line", title: "Autonomie", description: "Vous modifiez vous-même" }
];

// Pricing inclusions
const inclusions = [
    "Audit complet de l'existant",
    "Design responsive (mobile/tablet/desktop)",
    "Optimisation SEO technique + référencement local",
    "Formation modification contenu",
    "1 mois de support post-lancement",
    "Hébergement première année (si Vercel gratuit)"
];

// FAQ data
const faqs = [
    {
        question: "Je dois refaire TOUT mon site ou on peut garder des choses ?",
        answer: "Ça dépend. Si votre contenu est bon, on le réutilise. Si votre design est sauvable, on s'en inspire. On ne jette pas par principe, on optimise."
    },
    {
        question: "Mon ancien dev va-t-il me bloquer l'accès ?",
        answer: "Normalement non, c'est votre site. Mais on a déjà vu le cas. Dans le pire scénario, on repart de zéro (avec votre contenu sauvegardé). Le nouveau site sera tellement mieux que vous ne le regretterez pas."
    },
    {
        question: "Je ne suis pas à Genève, vous travaillez quand même avec moi ?",
        answer: "Oui, sans problème. Je suis basé à Genève mais je travaille avec toute la Suisse romande (Lausanne, Valais, Fribourg, Neuchâtel, Jura). Tout se fait en remote, avec des visios si besoin."
    },
    {
        question: "Qu'est-ce qui se passe après le lancement ?",
        answer: "1 mois de support inclus pour les ajustements mineurs. Après, soit vous gérez vous-même (c'est fait pour), soit on met en place un forfait maintenance léger (50-150 CHF/mois selon besoins)."
    },
    {
        question: "Et si je veux ajouter un blog ou une boutique plus tard ?",
        answer: "Tout est prévu dans l'architecture. On peut faire évoluer le site facilement. C'est l'avantage d'un code propre et moderne."
    },
    {
        question: "Vous reprenez mon nom de domaine et mes emails ?",
        answer: "Oui, on garde tout. Migration transparente. Vos emails continuent de fonctionner, votre nom de domaine reste le vôtre."
    },
    {
        question: "Vous utilisez quelle technologie ?",
        answer: "Ça dépend de votre projet. Framer pour du simple et rapide, Webflow pour du design poussé, Astro pour du contenu riche. On n'impose pas une stack par dogme, on choisit ce qui est optimal pour VOUS."
    },
    {
        question: "Pourquoi pas WordPress comme tout le monde ?",
        answer: "Parce que \"tout le monde\" = 90% des sites piratés. WordPress est une techno de 2003, lourde, vulnérable, coûteuse en maintenance. Les alternatives modernes sont 10x plus rapides, 100x plus sécurisées, et moins chères à long terme."
    },
    {
        question: "Je peux voir des exemples de vos refontes ?",
        answer: "Oui, consultez mon portfolio pour voir des exemples concrets de projets réalisés."
    },
    {
        question: "Comment se passe le premier contact ?",
        answer: "Vous remplissez le formulaire ou m'envoyez un email. Je vous réponds sous 24-48h avec quelques questions. Ensuite on planifie un appel de 15-30 min pour discuter de votre projet."
    }
];

// Local zones
const zones = [
    { name: "Genève", type: "primary", icon: "ri-map-pin-fill" },
    { name: "Vaud", type: "secondary", icon: "ri-map-pin-line" },
    { name: "Valais", type: "secondary", icon: "ri-map-pin-line" },
    { name: "Toute Suisse romande", type: "tertiary", icon: "ri-global-line" }
];

// Local advantages
const localAdvantages = [
    { icon: "ri-bar-chart-line", title: "Compréhension du marché", description: "Qualité, fiabilité, transparence suisses." },
    { icon: "ri-search-line", title: "Référencement local optimisé", description: "Votre activité + Genève en haut de Google." },
    { icon: "ri-time-line", title: "Même fuseau horaire", description: "Réunions en français, réactivité dans la journée." },
    { icon: "ri-shield-check-line", title: "Conformité LPD", description: "Respect de la loi suisse sur la protection des données." }
];

// Need checkboxes for form
const needOptions = [
    { value: "design-vieillot", label: "Design vieillot" },
    { value: "pas-google", label: "Pas trouvé sur Google" },
    { value: "pirate", label: "Site piraté/vulnérable" },
    { value: "impossible-modifier", label: "Impossible à modifier" },
    { value: "trop-lent", label: "Trop lent" },
    { value: "autre", label: "Autre" }
];
---

<Layout
    title={seoData.title}
    description={seoData.description}
    schema="Service"
    schemaData={serviceSchema}
>
    <Header />

    <!-- ============================================== -->
    <!-- HERO OPTION A - Browser Showcase (ACTIVE) -->
    <!-- ============================================== -->
    <section class="hero-section -mt-[120px] pt-[150px] pb-16 md:pt-[160px] md:pb-20 px-4 relative overflow-hidden">
        <!-- Gradient mesh background -->
        <div class="absolute inset-0 pointer-events-none" aria-hidden="true">
            <div class="absolute top-0 -left-20 w-[500px] h-[500px] bg-[var(--blue)] opacity-20 blur-[120px] rounded-full"></div>
            <div class="absolute top-1/3 -right-20 w-[400px] h-[400px] bg-[var(--violet)] opacity-15 blur-[100px] rounded-full"></div>
            <div class="absolute bottom-0 left-1/3 w-[300px] h-[300px] bg-[var(--blue)] opacity-10 blur-[80px] rounded-full"></div>
        </div>

        <div class="max-w-4xl mx-auto relative z-10">
            <!-- Centered text content -->
            <div class="text-center">
                <!-- H1 SEO discret -->
                <h1 class="seo-h1 mb-8 mt-8">Refonte de site web à Genève</h1>

                <!-- Main title -->
                <p class="text-3xl md:text-4xl lg:text-5xl font-normal tracking-tight mb-6">
                    Votre site date de 2015 ?<br/>
                    Il est temps de passer à la
                    <span class="relative inline-block">
                        <span class="relative z-10">vitesse supérieure</span>
                        <img
                            src={arrowUnderline.src}
                            alt=""
                            class="absolute -bottom-0 left-0 w-full h-8 pointer-events-none"
                            aria-hidden="true"
                        />
                    </span>
                </p>

                <!-- Description -->
                <p class="text-lg md:text-xl text-gray-600 mb-8 leading-relaxed max-w-2xl mx-auto">
                    Site lent, design vieillot, impossible à modifier vous-même, invisible sur Google ?<br class="hidden md:block"/>
                    <strong class="text-[var(--text)]">Je refais tout. Proprement. En 3 semaines.</strong>
                </p>

                <!-- CTAs centered -->
                <div class="flex flex-col sm:flex-row gap-4 justify-center mb-16 md:mb-20">
                    <a
                        href="#contact"
                        class="
                            bg-[var(--blue)]
                            border-2 border-black
                            px-6 py-4
                            text-lg font-medium
                            shadow-[4px_4px_0px_rgba(0,0,0,1)]
                            transition-all duration-200
                            hover:bg-[var(--yellow)]
                            hover:shadow-[2px_2px_0px_rgba(0,0,0,1)]
                            hover:translate-x-[2px] hover:translate-y-[2px]
                            flex items-center justify-center gap-2
                        "
                    >
                        <i class="ri-search-eye-line"></i>
                        Audit gratuit de mon site
                    </a>
                    <a
                        href="/portfolio"
                        class="
                            bg-white
                            border-2 border-black
                            px-6 py-4
                            text-lg font-medium
                            transition-all duration-200
                            hover:bg-gray-100
                            flex items-center justify-center gap-2
                        "
                    >
                        Voir des exemples
                        <i class="ri-arrow-right-line"></i>
                    </a>
                </div>
            </div>

            <!-- Browser mockup centered -->
            <div class="w-full mx-auto relative">
                <div class="bg-white border-3 border-black shadow-[8px_8px_0px_rgba(0,0,0,1)] relative">
                    <!-- Browser bar -->
                    <div class="flex items-center gap-2 p-3 border-b-2 border-black bg-gray-50">
                        <div class="flex gap-1.5">
                            <div class="w-3 h-3 rounded-full bg-red-400 border border-black"></div>
                            <div class="w-3 h-3 rounded-full bg-yellow-400 border border-black"></div>
                            <div class="w-3 h-3 rounded-full bg-green-400 border border-black"></div>
                        </div>
                        <div class="flex-1 bg-white border border-black px-3 py-1 text-xs text-gray-400 font-mono text-center">
                            barberconcept.ch
                        </div>
                    </div>
                    <!-- Screenshot -->
                    <img
                        src={refonteHero.src}
                        alt="Exemple de refonte de site web - Barber Concept"
                        class="w-full h-auto"
                    />
                </div>
                <!-- Score badge -->
                <div class="absolute -top-4 -left-4 bg-white border-2 border-black px-3 py-2 shadow-[3px_3px_0px_rgba(0,0,0,1)] -rotate-6">
                    <span class="font-mono text-sm font-bold text-[var(--blue)]">90+</span>
                    <span class="text-xs text-gray-500 block">Google</span>
                </div>
                <!-- Speed badge -->
                <div class="absolute -bottom-4 -right-4 bg-[var(--blue)] border-2 border-black px-4 py-2 shadow-[3px_3px_0px_rgba(0,0,0,1)] rotate-3">
                    <span class="font-bold text-sm">1 sec.</span>
                </div>
            </div>

            <!-- Location badge centered -->
            <div class="flex items-center justify-center gap-2 text-sm text-gray-500 mt-12">
                <i class="ri-map-pin-fill text-[var(--blue)]"></i>
                <span>Basé à Genève | Service en Suisse romande</span>
            </div>
        </div>
    </section>
  
    <!-- PAIN POINTS SECTION -->
    <section id="problemes" class="py-20 md:py-28 px-4 bg-white border-y-2 border-black relative overflow-hidden">
        <BackgroundGlitchGrid />
        <div class="max-w-5xl mx-auto relative z-10">
            <!-- Section header -->
            <div class="text-center mb-12 md:mb-16">
                <span class="inline-flex items-center gap-2 text-xs font-mono uppercase tracking-[0.2em] text-gray-500 mb-4">
                    <span class="w-8 h-px bg-gray-400"></span>
                    problèmes
                    <span class="w-8 h-px bg-gray-400"></span>
                </span>
                <h2 class="text-3xl md:text-4xl font-normal mb-4">
                    Votre site vous fait <span class="relative inline-block">
                        <span class="absolute bg-red-200 w-full h-[40%] left-0 bottom-1 -z-1"></span>
                        perdre des clients
                    </span><br/>
                    au lieu d'en gagner ?
                </h2>
                <p class="text-lg text-gray-600">Vous êtes au bon endroit si votre site...</p>
            </div>

            <!-- Pain points grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 mb-12">
                {painPoints.map((point) => (
                    <div class="pain-card bg-[var(--main-bg)] border-2 border-black p-6 relative transition-all duration-200 hover:-translate-y-1 hover:shadow-[4px_4px_0px_rgba(0,0,0,0.2)]">
                        <!-- Red X icon -->
                        <div class="w-10 h-10 bg-red-100 border-2 border-red-300 flex items-center justify-center mb-4">
                            <i class="ri-close-line text-red-500 text-xl"></i>
                        </div>
                        <h3 class="text-lg font-bold mb-2">{point.title}</h3>
                        <p class="text-gray-600 text-sm leading-relaxed">{point.description}</p>
                    </div>
                ))}
            </div>

            <!-- Good news callout -->
            <div class="bg-[var(--blue)] bg-opacity-10 border-2 border-[var(--blue)] p-6 md:p-8 text-center">
                <p class="text-lg md:text-xl font-medium">
                    <i class="ri-lightbulb-line text-[var(--blue)] mr-2"></i>
                    <strong>Bonne nouvelle :</strong> Tout ça, c'est réparable. Et plus vite que vous pensez.
                </p>
            </div>
        </div>
    </section>

    <!-- METHODOLOGY SECTION -->
    <section id="methode" class="py-20 md:py-28 px-4 relative overflow-hidden">
        <BackgroundProgressFlow />
        <div class="max-w-5xl mx-auto relative z-10">
            <!-- Section header -->
            <div class="text-center mb-12 md:mb-16">
                <span class="inline-flex items-center gap-2 text-xs font-mono uppercase tracking-[0.2em] text-gray-500 mb-4">
                    <span class="w-8 h-px bg-gray-400"></span>
                    méthode
                    <span class="w-8 h-px bg-gray-400"></span>
                </span>
                <h2 class="text-3xl md:text-4xl font-normal mb-4">
                    Je ne refais pas « pareil mais plus joli ».<br/>
                    <span class="text-[var(--blue)]">Je reconstruis stratégiquement.</span>
                </h2>
            </div>

            <!-- Timeline - Grid simple -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                {methodSteps.map((step, index) => (
                    <div class="bg-white border-2 border-black p-6 shadow-[4px_4px_0px_rgba(0,0,0,0.15)] relative">
                        <!-- Number badge intégré -->
                        <div class="flex items-center gap-3 mb-4">
                            <span class="w-10 h-10 bg-[var(--blue)] border-2 border-black flex items-center justify-center font-mono font-bold text-sm">
                                0{index + 1}
                            </span>
                            <span class="bg-[var(--accent)] px-3 py-1 text-sm font-mono font-bold">
                                {step.week}
                            </span>
                        </div>
                        <h3 class="text-xl font-bold mb-4">{step.title}</h3>
                        <ul class="space-y-2 mb-4">
                            {step.tasks.map((task) => (
                                <li class="flex items-start gap-2 text-gray-600">
                                    <i class="ri-check-line text-[var(--blue)] mt-0.5 flex-shrink-0"></i>
                                    <span>{task}</span>
                                </li>
                            ))}
                        </ul>
                        <!-- Deliverable -->
                        <div class="flex flex-col gap-1 text-sm pt-4 border-t border-dashed border-gray-300">
                            <span class="text-gray-400">Livrable</span>
                            <span class="bg-gray-100 border border-gray-300 px-2 py-1 font-medium text-xs">{step.deliverable}</span>
                        </div>
                    </div>
                ))}
            </div>

            <!-- Differentiators -->
            <div class="mt-16 md:mt-20">
                <h3 class="text-xl md:text-2xl font-bold text-center mb-8">Ce qui me différencie</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    {differentiators.map((diff) => (
                        <div class="bg-white border-2 border-black p-5">
                            <i class={`${diff.icon} text-2xl text-[var(--blue)] mb-3 block`}></i>
                            <h4 class="font-bold mb-2">{diff.title}</h4>
                            <p class="text-sm text-gray-600">{diff.description}</p>
                        </div>
                    ))}
                </div>
            </div>
        </div>
    </section>

    <!-- BEFORE/AFTER SECTION -->
    <section id="resultats" class="py-20 md:py-28 px-4 bg-white border-y-2 border-black">
        <div class="max-w-5xl mx-auto">
            <!-- Section header -->
            <div class="text-center mb-12 md:mb-16">
                <span class="inline-flex items-center gap-2 text-xs font-mono uppercase tracking-[0.2em] text-gray-500 mb-4">
                    <span class="w-8 h-px bg-gray-400"></span>
                    résultats
                    <span class="w-8 h-px bg-gray-400"></span>
                </span>
                <h2 class="text-3xl md:text-4xl font-normal">
                    Avant / Après :<br/>
                    <span class="text-[var(--blue)]">Les résultats mesurables</span>
                </h2>
            </div>

            <!-- Results table -->
            <div class="overflow-x-auto">
                <table class="w-full border-3 border-black bg-[var(--main-bg)]">
                    <!-- Header -->
                    <thead>
                        <tr class="bg-white border-b-3 border-black">
                            <th class="p-4 text-left font-bold border-r-2 border-black">Métrique</th>
                            <th class="p-4 text-center font-bold border-r-2 border-black bg-red-50">
                                <span class="flex items-center justify-center gap-2">
                                    <i class="ri-close-line text-red-500"></i>
                                    Avant
                                </span>
                            </th>
                            <th class="p-4 text-center font-bold border-r-2 border-black bg-[var(--blue)] bg-opacity-20">
                                <span class="flex items-center justify-center gap-2">
                                    <i class="ri-check-line text-[var(--blue)]"></i>
                                    Après
                                </span>
                            </th>
                            <th class="p-4 text-center font-bold">Impact</th>
                        </tr>
                    </thead>
                    <!-- Body -->
                    <tbody>
                        {results.map((result, index) => (
                            <tr class={`border-b-2 border-black last:border-b-0 hover:bg-white transition-colors ${index % 2 === 0 ? 'bg-white/50' : ''}`}>
                                <td class="p-4 border-r-2 border-black">
                                    <span class="flex items-center gap-3">
                                        <i class={`${result.icon} text-xl text-[var(--blue)]`}></i>
                                        <span class="font-medium">{result.metric}</span>
                                    </span>
                                </td>
                                <td class="p-4 text-center border-r-2 border-black text-gray-600">
                                    {result.before}
                                </td>
                                <td class="p-4 text-center border-r-2 border-black font-bold text-[var(--text)]">
                                    {result.after}
                                </td>
                                <td class="p-4 text-center">
                                    <span class="inline-block bg-[var(--blue)] bg-opacity-15 border border-[var(--blue)] px-3 py-1 text-sm font-medium">
                                        {result.impact}
                                    </span>
                                </td>
                            </tr>
                        ))}
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <!-- TECHNOLOGY SECTION -->
    <section id="technologie" class="py-20 md:py-28 px-4 relative overflow-hidden">
        <BackgroundCircuitBoard animated={true} />
        <div class="max-w-5xl mx-auto relative z-10">
            <!-- Section header -->
            <div class="text-center mb-12 md:mb-16">
                <span class="inline-flex items-center gap-2 text-xs font-mono uppercase tracking-[0.2em] text-gray-500 mb-4">
                    <span class="w-8 h-px bg-gray-400"></span>
                    technologie
                    <span class="w-8 h-px bg-gray-400"></span>
                </span>
                <h2 class="text-3xl md:text-4xl font-normal mb-4">
                    Technologie moderne,<br/>
                    <span class="text-[var(--blue)]">adaptée à vous</span>
                </h2>
                <p class="text-lg text-gray-600 max-w-2xl mx-auto">
                    Pas de religion technologique. On choisit la techno <strong>APRÈS</strong> avoir compris votre besoin.
                </p>
            </div>

            <!-- Tech options -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 mb-12">
                {techOptions.map((tech) => (
                    <div class="tech-card bg-white border-2 border-black p-6 text-center transition-all duration-200 hover:shadow-[4px_4px_0px_rgba(0,0,0,0.2)]">
                        <i class={`${tech.icon} text-3xl text-[var(--violet)] mb-4 block`}></i>
                        <p class="text-sm text-gray-500 mb-1">{tech.type}</p>
                        <h3 class="text-xl font-bold mb-2">{tech.solution}</h3>
                        <p class="text-sm text-[var(--blue)] font-medium">{tech.benefit}</p>
                    </div>
                ))}
            </div>

            <!-- Guarantees -->
            <div class="bg-white border-2 border-black p-6 md:p-8 mb-12">
                <h3 class="text-lg font-bold text-center mb-6">Les 3 garanties (peu importe la techno)</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    {guarantees.map((g) => (
                        <div class="flex items-start gap-4">
                            <div class="w-12 h-12 bg-[var(--blue)] border-2 border-black flex items-center justify-center flex-shrink-0">
                                <i class={`${g.icon} text-xl`}></i>
                            </div>
                            <div>
                                <h4 class="font-bold mb-1">{g.title}</h4>
                                <p class="text-sm text-gray-600">{g.description}</p>
                            </div>
                        </div>
                    ))}
                </div>
            </div>
        </div>
    </section>

    <!-- PRICING SECTION -->
    <section id="prix" class="py-20 md:py-28 px-4 bg-white border-y-2 border-black">
        <div class="max-w-5xl mx-auto">
            <!-- Section header -->
            <div class="text-center mb-12 md:mb-16">
                <span class="inline-flex items-center gap-2 text-xs font-mono uppercase tracking-[0.2em] text-gray-500 mb-4">
                    <span class="w-8 h-px bg-gray-400"></span>
                    investissement
                    <span class="w-8 h-px bg-gray-400"></span>
                </span>
                <h2 class="text-3xl md:text-4xl font-normal">
                    Combien de temps ?<br/>
                    <span class="text-[var(--blue)]">Combien ça coûte ?</span>
                </h2>
            </div>

            <!-- Pricing cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8 mb-12">
                <!-- Timeline card -->
                <div class="bg-[var(--main-bg)] border-3 border-black p-6 md:p-8 shadow-[6px_6px_0px_rgba(0,0,0,1)] relative">
                    <!-- Corner boxes -->
                    <div class="absolute -top-1.5 -left-1.5 w-3 h-3 bg-[var(--blue)] border-2 border-black"></div>
                    <div class="absolute -top-1.5 -right-1.5 w-3 h-3 bg-[var(--blue)] border-2 border-black"></div>
                    <div class="absolute -bottom-1.5 -left-1.5 w-3 h-3 bg-[var(--blue)] border-2 border-black"></div>
                    <div class="absolute -bottom-1.5 -right-1.5 w-3 h-3 bg-[var(--blue)] border-2 border-black"></div>

                    <h3 class="text-xl font-bold mb-6 flex items-center gap-2">
                        <i class="ri-calendar-line text-[var(--blue)]"></i>
                        Timeline réaliste
                    </h3>

                    <div class="space-y-4">
                        <div class="bg-white border-2 border-black p-4">
                            <span class="text-sm text-gray-500">Refonte complète</span>
                            <p class="text-2xl font-bold">3 semaines</p>
                            <ul class="text-sm text-gray-600 mt-2 space-y-1">
                                <li>• Semaine 1 : Stratégie & Design</li>
                                <li>• Semaine 2 : Contenu & Développement</li>
                                <li>• Semaine 3 : Tests & Lancement</li>
                            </ul>
                        </div>
                        <div class="bg-[var(--accent)] bg-opacity-30 border-2 border-[var(--violet)] p-4">
                            <span class="text-sm text-[var(--violet)]">Refonte express</span>
                            <p class="text-2xl font-bold">10 jours</p>
                            <p class="text-sm text-gray-600">Pour sites &lt; 10 pages sans fonctionnalités complexes</p>
                        </div>
                    </div>
                </div>

                <!-- Pricing card -->
                <div class="bg-[var(--main-bg)] border-3 border-black p-6 md:p-8 shadow-[6px_6px_0px_rgba(0,0,0,1)] relative">
                    <!-- Corner boxes -->
                    <div class="absolute -top-1.5 -left-1.5 w-3 h-3 bg-[var(--violet)] border-2 border-black"></div>
                    <div class="absolute -top-1.5 -right-1.5 w-3 h-3 bg-[var(--violet)] border-2 border-black"></div>
                    <div class="absolute -bottom-1.5 -left-1.5 w-3 h-3 bg-[var(--violet)] border-2 border-black"></div>
                    <div class="absolute -bottom-1.5 -right-1.5 w-3 h-3 bg-[var(--violet)] border-2 border-black"></div>

                    <h3 class="text-xl font-bold mb-6 flex items-center gap-2">
                        <i class="ri-price-tag-3-line text-[var(--violet)]"></i>
                        Budget transparent
                    </h3>

                    <div class="mb-6">
                        <span class="text-sm text-gray-500">À partir de</span>
                        <p class="text-4xl font-bold text-[var(--text)]">750 <span class="text-xl">CHF</span></p>
                        <p class="text-sm text-gray-600">(site vitrine simple 1-3 pages)</p>
                    </div>

                    <div class="space-y-3 text-sm">
                        <div class="flex justify-between py-2 border-b border-dashed border-gray-300">
                            <span class="text-gray-600">Site vitrine 5-10 pages</span>
                            <span class="font-bold">1'000 - 2'500 CHF</span>
                        </div>
                        <div class="flex justify-between py-2 border-b border-dashed border-gray-300">
                            <span class="text-gray-600">Avec fonctionnalités (blog, formulaires...)</span>
                            <span class="font-bold">2'000 - 4'000 CHF</span>
                        </div>
                        <div class="flex justify-between py-2">
                            <span class="text-gray-600">E-commerce ou application</span>
                            <span class="font-bold">Sur devis</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Inclusions -->
            <div class="bg-white border-2 border-black p-6 md:p-8">
                <h3 class="font-bold mb-4 flex items-center gap-2">
                    <i class="ri-checkbox-circle-line text-[var(--blue)]"></i>
                    Ce qui est TOUJOURS inclus :
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
                    {inclusions.map((item) => (
                        <div class="flex items-center gap-2">
                            <i class="ri-check-line text-[var(--blue)]"></i>
                            <span class="text-sm">{item}</span>
                        </div>
                    ))}
                </div>
                <p class="mt-6 text-sm text-gray-500 bg-gray-50 p-3 border-l-4 border-[var(--blue)]">
                    <strong>Principe :</strong> Pas de mauvaise surprise. Devis clair avant de commencer.
                </p>
            </div>
        </div>
    </section>

    <!-- FAQ SECTION -->
    <section id="faq" class="py-20 md:py-28 px-4 relative overflow-hidden">
        <BackgroundQuestionMarks animated={true} />
        <div class="max-w-3xl mx-auto relative z-10">
            <!-- Section header -->
            <div class="text-center mb-12">
                <span class="inline-flex items-center gap-2 text-xs font-mono uppercase tracking-[0.2em] text-gray-500 mb-4">
                    <span class="w-8 h-px bg-gray-400"></span>
                    faq
                    <span class="w-8 h-px bg-gray-400"></span>
                </span>
                <h2 class="text-3xl md:text-4xl font-normal">Questions fréquentes</h2>
            </div>

            <!-- FAQ items -->
            <div class="faq-list space-y-6">
                {faqs.map((faq, index) => (
                    <div class="faq-item border-2 border-black bg-[var(--main-bg)]" data-faq-item>
                        <button
                            class="
                                faq-trigger
                                w-full
                                flex items-center justify-between gap-4
                                p-5
                                text-left
                                font-medium
                                cursor-pointer
                                transition-colors duration-200
                                hover:bg-[var(--blue)] hover:bg-opacity-10
                            "
                            aria-expanded="false"
                            data-faq-trigger
                        >
                            <span class="flex items-start gap-3">
                                <span class="font-mono text-sm text-gray-400 mt-0.5">{String(index + 1).padStart(2, '0')}</span>
                                <span class="text-lg">{faq.question}</span>
                            </span>
                            <span class="
                                faq-icon
                                w-8 h-8
                                border-2 border-black
                                bg-white
                                flex items-center justify-center
                                transition-transform duration-300
                                flex-shrink-0
                            ">
                                <i class="ri-add-line text-lg"></i>
                            </span>
                        </button>
                        <div
                            class="faq-content overflow-hidden transition-all duration-300"
                            style="max-height: 0;"
                            data-faq-content
                        >
                            <div class="p-6 pt-2 pl-12">
                                <p class="text-gray-600 leading-relaxed">
                                    {faq.answer}
                                    {index === 8 && (
                                        <a href="/portfolio" class="text-[var(--blue)] font-medium ml-1 hover:underline">
                                            Voir le portfolio →
                                        </a>
                                    )}
                                </p>
                            </div>
                        </div>
                    </div>
                ))}
            </div>
        </div>
    </section>

    <!-- LOCAL SEO SECTION -->
    <section id="local" class="py-20 md:py-28 px-4 bg-white border-y-2 border-black relative overflow-hidden">
        <BackgroundMapContours />
        <div class="max-w-5xl mx-auto relative z-10">
            <!-- Section header -->
            <div class="text-center mb-12 md:mb-16">
                <span class="inline-flex items-center gap-2 text-xs font-mono uppercase tracking-[0.2em] text-gray-500 mb-4">
                    <span class="w-8 h-px bg-gray-400"></span>
                    local
                    <span class="w-8 h-px bg-gray-400"></span>
                </span>
                <h2 class="text-3xl md:text-4xl font-normal">
                    Basé à <span class="text-[var(--blue)]">Genève</span>,<br/>
                    service en Suisse romande
                </h2>
            </div>

            <!-- Two columns -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12">
                <!-- Why local -->
                <div>
                    <h3 class="text-xl font-bold mb-6">Pourquoi choisir un prestataire local ?</h3>
                    <div class="space-y-4">
                        {localAdvantages.map((adv) => (
                            <div class="flex items-start gap-4 p-4 bg-[var(--main-bg)] border-2 border-black">
                                <div class="w-10 h-10 bg-[var(--blue)] border-2 border-black flex items-center justify-center flex-shrink-0">
                                    <i class={`${adv.icon} text-lg`}></i>
                                </div>
                                <div>
                                    <h4 class="font-bold mb-1">{adv.title}</h4>
                                    <p class="text-sm text-gray-600">{adv.description}</p>
                                </div>
                            </div>
                        ))}
                    </div>
                </div>

                <!-- Zones -->
                <div>
                    <h3 class="text-xl font-bold mb-6">Zones d'intervention prioritaires</h3>
                    <div class="space-y-3">
                        {zones.map((zone) => (
                            <div class={`
                                flex items-center gap-4 p-4 border-2 border-black
                                ${zone.type === 'primary' ? 'bg-[var(--blue)] bg-opacity-20 border-[var(--blue)]' : 'bg-white'}
                            `}>
                                <i class={`${zone.icon} text-xl ${zone.type === 'primary' ? 'text-[var(--blue)]' : 'text-gray-600'}`}></i>
                                <span class={`font-medium ${zone.type === 'primary' ? 'text-lg font-bold' : ''}`}>
                                    {zone.name}
                                    {zone.type === 'primary' && <span class="text-sm font-normal text-gray-600 ml-2">(basé sur place)</span>}
                                </span>
                            </div>
                        ))}
                    </div>
                    <p class="mt-6 text-sm text-gray-500">
                        <i class="ri-information-line mr-1"></i>
                        Distance pas un problème : tout se fait en remote. Déplacements possibles si rencontre souhaitée.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- CTA + FORM SECTION -->
    <section id="contact" class="py-20 md:py-28 px-4 bg-[var(--main-bg)] relative overflow-hidden">
        <!-- Dot pattern background -->
        <div class="absolute inset-0 dots-bg opacity-[0.4]"></div>

        <div class="max-w-4xl mx-auto relative z-10">
            <!-- Section header -->
            <div class="text-center mb-12 md:mb-16">
                <h2 class="text-3xl md:text-4xl font-normal mb-4 text-[var(--text)]">
                    Prêt à moderniser votre site ?
                </h2>
                <p class="text-lg text-gray-600">2 options pour commencer</p>
            </div>

            <!-- Options -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-12">
                <div class="bg-white border-2 border-black p-6 text-center shadow-[4px_4px_0px_rgba(0,0,0,0.15)]">
                    <div class="w-12 h-12 bg-[var(--blue)] border-2 border-black mx-auto mb-4 flex items-center justify-center">
                        <i class="ri-search-eye-line text-xl text-black"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Option 1 : Audit gratuit</h3>
                    <p class="text-gray-600 text-sm mb-4">15 min, pas de bullshit, pas de vente forcée.<br/>Je regarde votre site et vous dis ce qui cloche.</p>
                </div>
                <div class="bg-white border-2 border-black p-6 text-center shadow-[4px_4px_0px_rgba(0,0,0,0.15)]">
                    <div class="w-12 h-12 bg-[var(--violet)] border-2 border-black mx-auto mb-4 flex items-center justify-center">
                        <i class="ri-chat-3-line text-xl text-white"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-2">Option 2 : Discutons</h3>
                    <p class="text-gray-600 text-sm mb-4">Vous avez une idée claire ?<br/>On skip l'audit et on parle budget/timeline direct.</p>
                </div>
            </div>

            <!-- Contact Form -->
            <div class="contact-form-container">
                <form
                    class="bg-white text-[var(--text)] border-3 border-black p-6 md:p-8 shadow-[8px_8px_0px_rgba(0,217,163,0.3)] relative"
                    id="refonte-form"
                >
                    <!-- Corner boxes -->
                    <div class="absolute -top-1.5 -left-1.5 w-3 h-3 bg-[var(--blue)] border-2 border-black"></div>
                    <div class="absolute -top-1.5 -right-1.5 w-3 h-3 bg-[var(--blue)] border-2 border-black"></div>
                    <div class="absolute -bottom-1.5 -left-1.5 w-3 h-3 bg-[var(--blue)] border-2 border-black"></div>
                    <div class="absolute -bottom-1.5 -right-1.5 w-3 h-3 bg-[var(--blue)] border-2 border-black"></div>

                    <!-- Hidden fields for Web3Forms -->
                    <input type="hidden" name="access_key" value="2964b7b3-2e2d-454b-a792-967518d5788b">
                    <input type="hidden" name="subject" value="Demande refonte site web - Jon Labs">
                    <input type="hidden" name="from_name" value="Jon Labs - Refonte">
                    <input type="checkbox" name="botcheck" class="hidden" style="display: none;">

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Nom -->
                        <div class="form-field">
                            <label for="name" class="flex items-center gap-2 text-sm font-medium mb-2">
                                <span class="font-mono text-xs text-gray-400">01</span>
                                Votre nom <span class="text-red-500">*</span>
                            </label>
                            <input
                                type="text"
                                id="name"
                                name="name"
                                required
                                placeholder="Jean Dupont"
                                class="w-full px-4 py-3 border-2 border-black bg-white text-lg placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-[var(--blue)] focus:ring-offset-2 transition-all"
                            />
                        </div>

                        <!-- Email -->
                        <div class="form-field">
                            <label for="email" class="flex items-center gap-2 text-sm font-medium mb-2">
                                <span class="font-mono text-xs text-gray-400">02</span>
                                Votre email <span class="text-red-500">*</span>
                            </label>
                            <input
                                type="email"
                                id="email"
                                name="email"
                                required
                                placeholder="vous@exemple.ch"
                                class="w-full px-4 py-3 border-2 border-black bg-white text-lg placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-[var(--blue)] focus:ring-offset-2 transition-all"
                            />
                        </div>

                        <!-- Téléphone -->
                        <div class="form-field">
                            <label for="phone" class="flex items-center gap-2 text-sm font-medium mb-2">
                                <span class="font-mono text-xs text-gray-400">03</span>
                                Téléphone
                            </label>
                            <input
                                type="tel"
                                id="phone"
                                name="phone"
                                placeholder="+41 79 123 45 67"
                                class="w-full px-4 py-3 border-2 border-black bg-white text-lg placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-[var(--blue)] focus:ring-offset-2 transition-all"
                            />
                        </div>

                        <!-- Activité -->
                        <div class="form-field">
                            <label for="activity" class="flex items-center gap-2 text-sm font-medium mb-2">
                                <span class="font-mono text-xs text-gray-400">04</span>
                                Votre activité <span class="text-red-500">*</span>
                            </label>
                            <input
                                type="text"
                                id="activity"
                                name="activity"
                                required
                                placeholder="Coach, Restaurant, Artisan..."
                                class="w-full px-4 py-3 border-2 border-black bg-white text-lg placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-[var(--blue)] focus:ring-offset-2 transition-all"
                            />
                        </div>

                        <!-- URL site actuel -->
                        <div class="form-field md:col-span-2">
                            <label for="current-site" class="flex items-center gap-2 text-sm font-medium mb-2">
                                <span class="font-mono text-xs text-gray-400">05</span>
                                URL de votre site actuel
                            </label>
                            <input
                                type="url"
                                id="current-site"
                                name="current_site"
                                placeholder="https://votresite.ch"
                                class="w-full px-4 py-3 border-2 border-black bg-white text-lg placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-[var(--blue)] focus:ring-offset-2 transition-all"
                            />
                        </div>

                        <!-- Besoin principal (checkboxes) -->
                        <div class="form-field md:col-span-2">
                            <label class="flex items-center gap-2 text-sm font-medium mb-3">
                                <span class="font-mono text-xs text-gray-400">06</span>
                                Besoin principal <span class="text-red-500">*</span>
                            </label>
                            <div class="grid grid-cols-2 md:grid-cols-3 gap-3">
                                {needOptions.map((option) => (
                                    <label class="flex items-center gap-2 cursor-pointer group">
                                        <input
                                            type="checkbox"
                                            name="needs[]"
                                            value={option.value}
                                            class="w-5 h-5 border-2 border-black appearance-none cursor-pointer checked:bg-[var(--blue)] checked:border-black relative transition-all"
                                        />
                                        <span class="text-sm group-hover:text-[var(--blue)] transition-colors">{option.label}</span>
                                    </label>
                                ))}
                            </div>
                        </div>

                        <!-- Message -->
                        <div class="form-field md:col-span-2">
                            <label for="message" class="flex items-center gap-2 text-sm font-medium mb-2">
                                <span class="font-mono text-xs text-gray-400">07</span>
                                Message (optionnel)
                            </label>
                            <textarea
                                id="message"
                                name="message"
                                rows="4"
                                placeholder="Décrivez votre situation, vos besoins, vos questions..."
                                class="w-full px-4 py-3 border-2 border-black bg-white text-lg placeholder:text-gray-400 resize-none focus:outline-none focus:ring-2 focus:ring-[var(--blue)] focus:ring-offset-2 transition-all"
                            ></textarea>
                        </div>

                        <!-- Consent -->
                        <div class="form-field md:col-span-2">
                            <label class="flex items-start gap-3 cursor-pointer group">
                                <input
                                    type="checkbox"
                                    name="consent"
                                    required
                                    class="mt-1 w-5 h-5 border-2 border-black appearance-none cursor-pointer checked:bg-[var(--blue)] checked:border-black relative transition-all"
                                />
                                <span class="text-sm text-gray-600 group-hover:text-black transition-colors">
                                    J'accepte d'être contacté par Jon Labs concernant ma demande. <span class="text-red-500">*</span>
                                </span>
                            </label>
                        </div>

                        <!-- Submit -->
                        <div class="md:col-span-2 pt-4">
                            <button
                                type="submit"
                                class="
                                    submit-btn
                                    w-full
                                    bg-[var(--blue)]
                                    border-2 border-black
                                    px-8 py-4
                                    text-lg font-bold
                                    shadow-[4px_4px_0px_rgba(0,0,0,1)]
                                    transition-all duration-200
                                    hover:bg-[var(--yellow)]
                                    hover:shadow-[2px_2px_0px_rgba(0,0,0,1)]
                                    hover:translate-x-[2px] hover:translate-y-[2px]
                                    focus:outline-none focus:ring-2 focus:ring-black focus:ring-offset-2
                                    flex items-center justify-center gap-3
                                "
                            >
                                <span>Envoyer ma demande</span>
                                <i class="ri-send-plane-line text-xl"></i>
                            </button>
                        </div>
                    </div>
                </form>

                <!-- Trust indicators -->
                <div class="flex flex-wrap justify-center gap-6 mt-8 text-sm text-gray-600">
                    <span class="flex items-center gap-2">
                        <i class="ri-time-line text-[var(--blue)]"></i>
                        Réponse sous 24-48h
                    </span>
                    <span class="flex items-center gap-2">
                        <i class="ri-gift-line text-[var(--blue)]"></i>
                        Audit gratuit
                    </span>
                    <span class="flex items-center gap-2">
                        <i class="ri-file-list-3-line text-[var(--blue)]"></i>
                        Devis clair
                    </span>
                </div>

                <!-- Direct contact -->
                <div class="text-center mt-8">
                    <p class="text-gray-500 text-sm mb-2">Besoin d'une réponse rapide ?</p>
                    <a href="mailto:contact@jonlabs.ch" class="text-[var(--blue)] font-mono hover:underline">
                        → contact@jonlabs.ch
                    </a>
                </div>
            </div>
        </div>
    </section>

    <Footer />
</Layout>

<style>
    /* Dot pattern background */
    .dots-bg {
        background-image: radial-gradient(circle, #000 1px, transparent 1px);
        background-size: 24px 24px;
    }

    /* FAQ animations */
    .faq-item[data-open="true"] .faq-icon {
        transform: rotate(45deg);
        background-color: var(--blue);
    }

     /* H1 SEO style terminal */
  .seo-h1 {
    font-family: 'JetBrains Mono', 'Space Grotesk', monospace;
    font-size: 0.75rem;
    font-weight: 400;
    color: rgba(15, 15, 15, 0.5);
    letter-spacing: 0.05em;
    display: flex;
    align-items: center;
    justify-content: center;
  }


    /* Custom checkbox checkmark */
    input[type="checkbox"]:checked::after {
        content: '';
        position: absolute;
        left: 5px;
        top: 1px;
        width: 6px;
        height: 12px;
        border: solid black;
        border-width: 0 2px 2px 0;
        transform: rotate(45deg);
    }

    /* Submit button loading state */
    .submit-btn.loading {
        pointer-events: none;
        opacity: 0.7;
    }

    .submit-btn.loading i {
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    /* Scroll margin for anchor navigation */
    section[id] {
        scroll-margin-top: 100px;
    }
</style>

<script>
    // FAQ accordion logic
    const faqItems = document.querySelectorAll('[data-faq-item]');

    faqItems.forEach(item => {
        const trigger = item.querySelector('[data-faq-trigger]');
        const content = item.querySelector('[data-faq-content]') as HTMLElement;

        trigger?.addEventListener('click', () => {
            const isOpen = item.getAttribute('data-open') === 'true';

            // Close all other items
            faqItems.forEach(otherItem => {
                if (otherItem !== item) {
                    otherItem.setAttribute('data-open', 'false');
                    const otherContent = otherItem.querySelector('[data-faq-content]') as HTMLElement;
                    const otherTrigger = otherItem.querySelector('[data-faq-trigger]');
                    if (otherContent) otherContent.style.maxHeight = '0';
                    otherTrigger?.setAttribute('aria-expanded', 'false');
                }
            });

            // Toggle current item
            if (isOpen) {
                item.setAttribute('data-open', 'false');
                content.style.maxHeight = '0';
                trigger.setAttribute('aria-expanded', 'false');
            } else {
                item.setAttribute('data-open', 'true');
                content.style.maxHeight = content.scrollHeight + 'px';
                trigger.setAttribute('aria-expanded', 'true');
            }
        });
    });

    // Form submission
    const form = document.getElementById('refonte-form') as HTMLFormElement;
    const submitBtn = form?.querySelector('.submit-btn') as HTMLButtonElement;
    const btnText = submitBtn?.querySelector('span');
    const btnIcon = submitBtn?.querySelector('i');

    form?.addEventListener('submit', async (e) => {
        e.preventDefault();

        // Validate at least one need is selected
        const needs = form.querySelectorAll('input[name="needs[]"]:checked');
        if (needs.length === 0) {
            alert('Veuillez sélectionner au moins un besoin principal.');
            return;
        }

        // Loading state
        if (submitBtn) {
            submitBtn.classList.add('loading');
            submitBtn.disabled = true;
            if (btnText) btnText.textContent = 'Envoi en cours...';
            if (btnIcon) btnIcon.className = 'ri-loader-4-line text-xl animate-spin';
        }

        try {
            const formData = new FormData(form);
            const response = await fetch('https://api.web3forms.com/submit', {
                method: 'POST',
                body: formData
            });

            const result = await response.json();

            if (result.success) {
                // Show success message
                alert('Merci ! Votre demande a bien été envoyée. Je vous réponds sous 24-48h.');
                form.reset();
            } else {
                alert('Erreur lors de l\'envoi. Veuillez réessayer ou m\'écrire directement à contact@jonlabs.ch');
            }
        } catch (error) {
            alert('Erreur de connexion. Veuillez réessayer.');
        } finally {
            // Reset button
            if (submitBtn) {
                submitBtn.classList.remove('loading');
                submitBtn.disabled = false;
                if (btnText) btnText.textContent = 'Envoyer ma demande';
                if (btnIcon) btnIcon.className = 'ri-send-plane-line text-xl';
            }
        }
    });
</script>
