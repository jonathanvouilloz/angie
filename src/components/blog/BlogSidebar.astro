---
import { categories } from '../../lib/blog';

const categoryList = [
  { slug: 'all', name: 'Tous' },
  ...Object.entries(categories).map(([slug, data]) => ({ slug, name: data.name })),
];
---

<aside class="blog-sidebar lg:sticky lg:top-24 lg:h-fit">
  <div class="bg-white border-2 border-black p-4 shadow-[3px_3px_0px_rgba(0,0,0,0.2)]">
    <!-- View toggle (hidden on mobile - no visual difference) -->
    <div class="hidden lg:block mb-6">
      <label class="block text-xs font-mono uppercase tracking-wider text-gray-500 mb-2">
        Affichage
      </label>
      <div class="flex border-2 border-black" id="view-toggle">
        <button
          type="button"
          data-view="grid"
          class="view-btn flex-1 px-3 py-2 text-sm font-medium bg-[var(--blue)] border-r border-black transition-colors"
          aria-label="Vue grille"
          title="Grille"
        >
          <i class="ri-grid-fill"></i>
        </button>
        <button
          type="button"
          data-view="list"
          class="view-btn flex-1 px-3 py-2 text-sm font-medium bg-white transition-colors"
          aria-label="Vue liste"
          title="Liste"
        >
          <i class="ri-list-check"></i>
        </button>
      </div>
    </div>

    <!-- Search input -->
    <div class="mb-6">
      <label class="block text-xs font-mono uppercase tracking-wider text-gray-500 mb-2">
        Rechercher
      </label>
      <div class="relative">
        <input
          type="text"
          placeholder="Mot-clé, tag..."
          class="w-full px-3 py-2 pr-9 border-2 border-black bg-white text-sm focus:outline-none focus:ring-2 focus:ring-[var(--blue)]"
          id="blog-search"
        />
        <i class="ri-search-line absolute right-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
      </div>
    </div>

    <!-- Category filters -->
    <div>
      <label class="block text-xs font-mono uppercase tracking-wider text-gray-500 mb-3">
        Catégories
      </label>
      <div class="flex flex-col gap-2" id="category-filters">
        {categoryList.map((cat) => (
          <button
            type="button"
            data-category={cat.slug}
            class:list={[
              'filter-btn w-full px-3 py-2 text-sm font-medium text-left border-2 border-black transition-all duration-200',
              cat.slug === 'all'
                ? 'bg-[var(--blue)] shadow-[2px_2px_0px_rgba(0,0,0,1)] active'
                : 'bg-white hover:bg-gray-100',
            ]}
          >
            {cat.name}
          </button>
        ))}
      </div>
    </div>

    <!-- Reset button (hidden by default) -->
    <button
      id="reset-filters"
      class="hidden w-full mt-4 px-3 py-2 text-xs font-medium text-gray-500 border border-gray-300 hover:border-black hover:text-black transition-all"
    >
      <i class="ri-refresh-line mr-1"></i>
      Réinitialiser
    </button>
  </div>
</aside>
