---
interface Props {
  currentPage: number;
  totalPages: number;
  baseUrl: string;
}

const { currentPage, totalPages, baseUrl } = Astro.props;

// Don't render if only one page
if (totalPages <= 1) return;

// Generate page numbers to show
const pages: { number: number; url: string; current: boolean }[] = [];
for (let i = 1; i <= totalPages; i++) {
  pages.push({
    number: i,
    url: i === 1 ? baseUrl : `${baseUrl}${i}/`,
    current: i === currentPage,
  });
}

const prevUrl = currentPage > 1 ? (currentPage === 2 ? baseUrl : `${baseUrl}${currentPage - 1}/`) : null;
const nextUrl = currentPage < totalPages ? `${baseUrl}${currentPage + 1}/` : null;
---

<nav class="flex justify-center items-center gap-2 py-12" aria-label="Pagination">
  <!-- Previous -->
  {prevUrl ? (
    <a
      href={prevUrl}
      class="w-10 h-10 flex items-center justify-center border-2 border-black bg-white transition-all duration-200 hover:bg-[var(--blue)]"
      aria-label="Page précédente"
    >
      <i class="ri-arrow-left-line"></i>
    </a>
  ) : (
    <span
      class="w-10 h-10 flex items-center justify-center border-2 border-black bg-gray-100 opacity-50 cursor-not-allowed"
      aria-disabled="true"
    >
      <i class="ri-arrow-left-line"></i>
    </span>
  )}

  <!-- Page numbers -->
  {pages.map((page) => (
    <a
      href={page.url}
      class:list={[
        'w-10 h-10 flex items-center justify-center border-2 border-black font-medium text-sm transition-all duration-200',
        page.current
          ? 'bg-[var(--blue)] shadow-[2px_2px_0px_rgba(0,0,0,1)]'
          : 'bg-white hover:bg-gray-100',
      ]}
      aria-current={page.current ? 'page' : undefined}
    >
      {page.number}
    </a>
  ))}

  <!-- Next -->
  {nextUrl ? (
    <a
      href={nextUrl}
      class="w-10 h-10 flex items-center justify-center border-2 border-black bg-white transition-all duration-200 hover:bg-[var(--blue)]"
      aria-label="Page suivante"
    >
      <i class="ri-arrow-right-line"></i>
    </a>
  ) : (
    <span
      class="w-10 h-10 flex items-center justify-center border-2 border-black bg-gray-100 opacity-50 cursor-not-allowed"
      aria-disabled="true"
    >
      <i class="ri-arrow-right-line"></i>
    </span>
  )}
</nav>
