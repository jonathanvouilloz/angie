---
interface Props {
    color?: string;
    opacity?: number;
    centerX?: string;
    centerY?: string;
}

const {
    color = 'var(--blue)',
    opacity = 0.12,
    centerX = '30%',
    centerY = '50%'
} = Astro.props;
---

<div class="map-contours-bg" aria-hidden="true">
    <svg class="contours-svg" viewBox="0 0 800 600" preserveAspectRatio="xMidYMid slice">
        <defs>
            <linearGradient id="contour-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style={`stop-color: ${color}; stop-opacity: 1`}/>
                <stop offset="100%" style={`stop-color: ${color}; stop-opacity: 0.3`}/>
            </linearGradient>
        </defs>

        <!-- Concentric contour lines - irregular ellipses for organic feel -->
        <g class="contour-group" fill="none" stroke="url(#contour-gradient)">
            <!-- Innermost -->
            <ellipse cx="240" cy="300" rx="40" ry="35" stroke-width="1.5" opacity="0.8"/>
            <ellipse cx="240" cy="300" rx="80" ry="65" stroke-width="1.5" opacity="0.7"/>
            <ellipse cx="240" cy="300" rx="130" ry="100" stroke-width="1.5" opacity="0.6"/>
            <ellipse cx="240" cy="300" rx="190" ry="140" stroke-width="1.5" opacity="0.5"/>
            <ellipse cx="240" cy="300" rx="260" ry="185" stroke-width="1.5" opacity="0.4"/>
            <ellipse cx="240" cy="300" rx="340" ry="235" stroke-width="1.5" opacity="0.3"/>
            <ellipse cx="240" cy="300" rx="430" ry="290" stroke-width="1.5" opacity="0.2"/>
            <ellipse cx="240" cy="300" rx="530" ry="350" stroke-width="1.5" opacity="0.15"/>

            <!-- Offset secondary contours for depth -->
            <ellipse cx="280" cy="280" rx="60" ry="45" stroke-width="1" opacity="0.4"/>
            <ellipse cx="200" cy="320" rx="100" ry="75" stroke-width="1" opacity="0.35"/>
            <ellipse cx="260" cy="310" rx="170" ry="125" stroke-width="1" opacity="0.25"/>
        </g>

        <!-- Center marker (like a map pin point) -->
        <g class="center-marker">
            <circle cx="240" cy="300" r="6" fill="currentColor" opacity="0.3"/>
            <circle cx="240" cy="300" r="3" fill="currentColor" opacity="0.5"/>
        </g>

        <!-- Subtle grid overlay for map feel -->
        <g class="grid-overlay" stroke="currentColor" stroke-width="0.5" opacity="0.1">
            <line x1="0" y1="150" x2="800" y2="150"/>
            <line x1="0" y1="300" x2="800" y2="300"/>
            <line x1="0" y1="450" x2="800" y2="450"/>
            <line x1="200" y1="0" x2="200" y2="600"/>
            <line x1="400" y1="0" x2="400" y2="600"/>
            <line x1="600" y1="0" x2="600" y2="600"/>
        </g>
    </svg>
</div>

<style define:vars={{ color, opacity, centerX, centerY }}>
    .map-contours-bg {
        position: absolute;
        inset: 0;
        pointer-events: none;
        z-index: 0;
        overflow: hidden;
        color: var(--color);
        opacity: var(--opacity);
    }

    .contours-svg {
        width: 100%;
        height: 100%;
        min-width: 800px;
    }

    .contour-group {
        transform-origin: var(--centerX) var(--centerY);
    }

    .center-marker {
        filter: drop-shadow(0 0 4px currentColor);
    }
</style>
