---
import svgArrowCard from '../assets/arrow-card.svg'
import svgRedStar from '../assets/red-star.svg'
import svgPinkStar from '../assets/pink-star.svg'

// Placeholder projects data
const projects = [
    {
        id: 'ecommerce',
        title: 'Boutique E-commerce',
        description: 'Site de vente en ligne complet avec gestion de stock, paiements Stripe et tableau de bord admin.',
        image: 'https://images.pexels.com/photos/5632402/pexels-photo-5632402.jpeg?auto=compress&cs=tinysrgb&w=800',
        technologies: ['React', 'Node.js', 'Stripe'],
        category: 'Dev Web',
        link: '#'
    },
    {
        id: 'dashboard',
        title: 'Dashboard Analytics',
        description: 'Tableau de bord temps réel pour visualiser les métriques clés et générer des rapports automatisés.',
        image: 'https://images.pexels.com/photos/7947541/pexels-photo-7947541.jpeg?auto=compress&cs=tinysrgb&w=800',
        technologies: ['Astro', 'Supabase', 'Chart.js'],
        category: 'Application',
        link: '#'
    },
    {
        id: 'pwa',
        title: 'App Mobile PWA',
        description: 'Application progressive installable sur mobile pour la gestion de tâches et la collaboration d\'équipe.',
        image: 'https://images.pexels.com/photos/5082579/pexels-photo-5082579.jpeg?auto=compress&cs=tinysrgb&w=800',
        technologies: ['React', 'Tailwind', 'PWA'],
        category: 'Application',
        link: '#'
    }
]
---

<section class="py-20 md:py-32 bg-[var(--main-bg)] relative overflow-hidden" id="portfolio">
    <!-- Decorative elements -->
    <img src={svgPinkStar.src} alt="" width="35" class="absolute bottom-24 left-8 opacity-30 hidden md:block" aria-hidden="true" />

    <div class="max-w-6xl mx-auto px-4 relative z-10">

        <!-- Section header - Editorial style -->
        <div class="relative mb-16 md:mb-20">
            <!-- Oversized number watermark -->
            <span class="
                absolute -top-8 -left-2 md:-top-12 md:-left-6
                text-[8rem] md:text-[12rem]
                font-black
                leading-none
                text-black/[0.04]
                select-none
                pointer-events-none
                z-0
            " aria-hidden="true">03</span>

            <!-- Decorative star -->
            <img src={svgRedStar.src} alt="" width="40" class="absolute top-0 right-0 md:right-1/4 opacity-60" aria-hidden="true" />

            <div class="relative z-10 flex flex-col md:flex-row md:items-end md:justify-between gap-6">
                <div>
                    <!-- Small annotation -->
                    <span class="
                        inline-flex items-center gap-2
                        text-xs font-mono uppercase tracking-[0.2em]
                        text-gray-500
                        mb-3
                    ">
                        <span class="w-8 h-px bg-gray-400"></span>
                        portfolio
                    </span>

                    <!-- Big expressive title -->
                    <h2 class="text-3xl md:text-4xl font-normal tracking-tight leading-[0.95]">
                        Projets Récents & Études de Cas
                    </h2>
                </div>

                <a
                    href="/portfolio/"
                    class="
                        inline-flex items-center gap-2
                        text-sm font-bold uppercase tracking-wide
                        border-b-2 border-black
                        pb-1
                        transition-all duration-200
                        hover:border-[var(--violet)] hover:gap-3
                    "
                >
                    Tout voir
                    <i class="ri-arrow-right-line"></i>
                </a>
            </div>
        </div>

        <!-- Projects grid with spotlight effect -->
        <div class="portfolio-grid grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8">
            {projects.map((project, index) => (
                <article
                    class="
                        group
                        project-card
                        bg-white border-2 border-black
                        shadow-[4px_4px_0px_rgba(0,0,0,0.25)]
                        overflow-hidden
                        relative
                    "
                >
                    <!-- Clickable card overlay -->
                    <a href={project.link} class="absolute inset-0 z-20" aria-label={`Voir le projet ${project.title}`}></a>

                    <!-- Image -->
                    <div class="relative aspect-video overflow-hidden border-b-2 border-black">
                        <img
                            src={project.image}
                            alt={project.title}
                            class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
                            loading="lazy"
                        />
                        <!-- Subtle gradient overlay on hover -->
                        <div class="absolute inset-0 bg-gradient-to-t from-black/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>

                        <!-- Category indicator (discret) -->
                        <span class="
                            absolute top-3 left-3
                            flex items-center gap-2
                            text-white text-xs font-mono uppercase tracking-wider
                            bg-black/50 backdrop-blur-sm
                            px-2 py-1
                        ">
                            <span class="w-1.5 h-1.5 bg-[var(--violet)] rounded-full"></span>
                            {project.category}
                        </span>

                        <!-- Project number -->
                        <span class="
                            absolute top-3 right-3
                            text-white/80 text-xs font-mono
                            bg-black/40 px-2 py-1
                            backdrop-blur-sm
                        ">
                            0{index + 1}
                        </span>

                        <!-- Arrow decoration -->
                        <img
                            src={svgArrowCard.src}
                            alt=""
                            width="40"
                            class="absolute bottom-3 right-3 opacity-0 group-hover:opacity-100 transition-all duration-300 translate-y-2 group-hover:translate-y-0"
                            aria-hidden="true"
                        />
                    </div>

                    <!-- Content -->
                    <div class="p-5 relative">
                        <h3 class="text-lg font-bold mb-2 group-hover:text-[var(--violet)] transition-colors duration-200">
                            {project.title}
                        </h3>
                        <p class="text-gray-600 text-sm leading-relaxed mb-4">
                            {project.description}
                        </p>

                        <!-- Technologies -->
                        <div class="flex flex-wrap gap-2 mb-4">
                            {project.technologies.map((tech) => (
                                <span class="
                                    px-2 py-1
                                    bg-gray-50 border border-gray-200
                                    text-xs font-medium text-gray-500
                                    transition-all duration-200
                                    group-hover:border-[var(--accent)]/40
                                    group-hover:text-gray-700
                                ">
                                    {tech}
                                </span>
                            ))}
                        </div>

                        <!-- Link visual -->
                        <span class="flex items-center gap-2 pt-2">
                            <span class="
                                text-sm font-bold
                                relative
                                before:absolute before:left-0 before:bottom-0
                                before:h-[2px] before:w-0 before:bg-[var(--accent)]
                                before:transition-all before:duration-300
                                group-hover:before:w-full
                            ">
                                Voir le projet
                            </span>
                            <i class="ri-arrow-right-line text-sm transition-transform duration-200 group-hover:translate-x-1"></i>
                        </span>
                    </div>

                    <!-- Bottom accent line on hover -->
                    <div class="
                        absolute bottom-0 left-0 right-0
                        h-1 bg-[var(--accent)]
                        transform scale-x-0 origin-left
                        group-hover:scale-x-100
                        transition-transform duration-300
                    "></div>
                </article>
            ))}
        </div>

    </div>
</section>

<style>
    /* Base card styles */
    .project-card {
        position: relative;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Spotlight effect - Desktop only */
    @media (min-width: 768px) {
        /* When grid is hovered, dim all cards */
        .portfolio-grid:hover .project-card {
            filter: blur(3px);
            opacity: 0.5;
            transform: scale(0.96);
        }

        /* The hovered card gets spotlight */
        .portfolio-grid:hover .project-card:hover {
            filter: blur(0);
            opacity: 1;
            transform: scale(1.08);
            z-index: 10;
        }
    }

    /* Mobile - simple hover */
    @media (max-width: 767px) {
        .project-card:hover {
            transform: translateY(-4px);
            box-shadow: 6px 6px 0px rgba(0,0,0,0.2);
        }
    }
</style>
