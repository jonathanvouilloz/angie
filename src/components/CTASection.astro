---
/**
 * CTASection - Composant CTA réutilisable
 *
 * Usage:
 * <CTASection
 *   title="Tu préfères déléguer ?"
 *   description="Cette checklist te donne les étapes..."
 *   buttonText="Demander un devis"
 *   buttonLink="/contact"
 *   buttonIcon="ri-chat-3-line"
 *   subtext="On discute de ton commerce..."
 *   variant="light" | "dark"
 * />
 */

interface Props {
    title: string;
    description: string;
    buttonText: string;
    buttonLink: string;
    buttonIcon?: string;
    subtext?: string;
    variant?: 'light' | 'dark';
    badge?: string;
}

const {
    title,
    description,
    buttonText,
    buttonLink,
    buttonIcon = 'ri-arrow-right-line',
    subtext,
    variant = 'light',
    badge
} = Astro.props;

const isLight = variant === 'light';
---

<section class={`py-16 md:py-24 px-4 ${isLight ? 'bg-[var(--main-bg)]' : 'bg-[var(--text)]'}`}>
    <div class="max-w-3xl mx-auto">
        <div class={`
            border-3 border-black p-8 md:p-12 text-center relative
            ${isLight ? 'bg-white shadow-[6px_6px_0px_rgba(0,0,0,1)]' : 'bg-[var(--text)] shadow-[6px_6px_0px_rgba(0,217,163,0.4)]'}
        `}>
            <!-- Corner boxes -->
            <div class={`absolute -top-1.5 -left-1.5 w-3 h-3 border-2 border-black ${isLight ? 'bg-[var(--blue)]' : 'bg-[var(--blue)]'}`}></div>
            <div class={`absolute -top-1.5 -right-1.5 w-3 h-3 border-2 border-black ${isLight ? 'bg-[var(--blue)]' : 'bg-[var(--blue)]'}`}></div>
            <div class={`absolute -bottom-1.5 -left-1.5 w-3 h-3 border-2 border-black ${isLight ? 'bg-[var(--blue)]' : 'bg-[var(--blue)]'}`}></div>
            <div class={`absolute -bottom-1.5 -right-1.5 w-3 h-3 border-2 border-black ${isLight ? 'bg-[var(--blue)]' : 'bg-[var(--blue)]'}`}></div>

            {badge && (
                <span class={`
                    inline-flex items-center gap-2 px-4 py-1 text-sm font-medium mb-6 border-2 border-black
                    ${isLight ? 'bg-[var(--blue)] bg-opacity-20' : 'bg-[var(--blue)]'}
                `}>
                    {badge}
                </span>
            )}

            <h2 class={`text-2xl md:text-3xl font-bold mb-4 ${isLight ? 'text-[var(--text)]' : 'text-white'}`}>
                {title}
            </h2>

            <p class={`text-lg mb-8 max-w-xl mx-auto ${isLight ? 'text-gray-600' : 'text-gray-300'}`}>
                {description}
            </p>

            <a
                href={buttonLink}
                class="
                    inline-flex items-center gap-2
                    bg-[var(--blue)]
                    text-black
                    border-2 border-black
                    px-8 py-4
                    text-lg font-bold
                    shadow-[4px_4px_0px_rgba(0,0,0,1)]
                    transition-all duration-200
                    hover:bg-[var(--yellow)]
                    hover:shadow-[2px_2px_0px_rgba(0,0,0,1)]
                    hover:translate-x-[2px] hover:translate-y-[2px]
                "
            >
                {buttonIcon && <i class={buttonIcon}></i>}
                {buttonText}
            </a>

            {subtext && (
                <p class={`mt-6 text-sm ${isLight ? 'text-gray-500' : 'text-gray-400'}`}>
                    {subtext}
                </p>
            )}
        </div>
    </div>
</section>
