---
import svgBottleLab from '../assets/bottle-lab.svg'

// Lab projects data
const labItems = [
    {
        id: 'camps-app',
        title: 'App Gestion Camps',
        description: 'Application de gestion budgétaire pour camps de vacances. Du MVP au produit complet.',
        icon: 'ri-tent-line',
        badge: 'En cours',
        techs: ['Astro', 'Supabase', 'PostgreSQL'],
        link: '#'
    },
    {
        id: 'boardgames',
        title: 'Jeux de Société',
        description: 'Newsletter et projet à venir dans l\'univers ludique.',
        icon: 'ri-gamepad-line',
        badge: 'Bientôt',
        link: '#'
    },
    {
        id: 'photography',
        title: 'Photographie',
        description: 'Capturer des moments, raconter des histoires.',
        icon: 'ri-camera-line',
        cta: 'Voir la galerie',
        link: '#'
    },
    {
        id: 'badminton',
        title: 'Badminton',
        description: 'Pratique régulière et soutien aux clubs.',
        icon: 'ri-ping-pong-line',
        link: '#'
    },
    {
        id: 'blog',
        title: 'Blog & Réflexions',
        description: 'Tech, création, jeux, crypto, et tout ce qui m\'inspire.',
        icon: 'ri-quill-pen-line',
        cta: 'Lire les articles',
        link: '/blog/'
    }
]
---

<section class="lab-section py-20 md:py-28 relative overflow-hidden" id="lab">
    <!-- Blueprint grid background -->
    <div class="absolute inset-0 lab-grid-bg"></div>

    <!-- Subtle glow effects -->
    <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-cyan-500/10 rounded-full blur-[100px]"></div>
    <div class="absolute bottom-1/4 right-1/4 w-64 h-64 bg-cyan-400/5 rounded-full blur-[80px]"></div>

    <div class="max-w-6xl mx-auto px-4 relative z-10">

        <!-- Section header -->
        <div class="text-center mb-16 animate-on-scroll">
            <!-- Title with bottle icon -->
            <div class="flex items-center justify-center gap-4 md:gap-6 mb-6">
                <!-- Bottle with glow effect -->
                <div class="bottle-container relative">
                    <img
                        src={svgBottleLab.src}
                        alt=""
                        class="bottle-icon w-12 h-16 md:w-16 md:h-24 relative z-10"
                        aria-hidden="true"
                    />
                    <!-- Glow layers -->
                    <div class="bottle-glow"></div>
                    <div class="bottle-glow-pulse"></div>
                </div>

                <h2 class="lab-title text-5xl md:text-7xl lg:text-8xl text-cyan-400">
                    Le Lab
                </h2>
            </div>

            <!-- Subtitle -->
            <p class="text-xl md:text-2xl text-slate-300 font-light tracking-wide mb-3">
                Expérimentations & Passions
            </p>

            <!-- Tagline -->
            <p class="text-sm md:text-base text-slate-500 italic">
                Parce qu'un créateur doit créer, sans limite de domaine.
            </p>

            <!-- Decorative line -->
            <div class="flex items-center justify-center gap-3 mt-8">
                <div class="w-16 h-px bg-cyan-500/50"></div>
                <div class="w-2 h-2 border border-cyan-500/50 rotate-45"></div>
                <div class="w-16 h-px bg-cyan-500/50"></div>
            </div>
        </div>

        <!-- Blueprint Bento Grid -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-5">

            <!-- App Gestion Camps - Large card -->
            <article class="
                group
                md:col-span-2 md:row-span-2
                lab-card lab-card-large
                p-6 md:p-8
                relative
                animate-on-scroll stagger-item
            ">
                <!-- Corner markers -->
                <div class="absolute top-2 left-2 w-3 h-3 border-l border-t border-cyan-500/60"></div>
                <div class="absolute top-2 right-2 w-3 h-3 border-r border-t border-cyan-500/60"></div>
                <div class="absolute bottom-2 left-2 w-3 h-3 border-l border-b border-cyan-500/60"></div>
                <div class="absolute bottom-2 right-2 w-3 h-3 border-r border-b border-cyan-500/60"></div>

                <!-- Status badge -->
                <div class="flex items-center gap-2 mb-6">
                    <span class="w-2 h-2 bg-cyan-400 rounded-full animate-pulse"></span>
                    <span class="text-xs font-mono text-cyan-400 uppercase tracking-widest">En cours</span>
                </div>

                <!-- Icon -->
                <div class="
                    w-14 h-14
                    flex items-center justify-center
                    border border-dashed border-cyan-500/40
                    mb-6
                    group-hover:border-cyan-400
                    group-hover:bg-cyan-500/10
                    transition-all duration-300
                ">
                    <i class="ri-tent-line text-2xl text-cyan-400"></i>
                </div>

                <h3 class="text-2xl md:text-3xl font-medium text-white mb-4 tracking-tight">
                    App Gestion Camps
                </h3>
                <p class="text-slate-400 leading-relaxed mb-6 max-w-md">
                    Application de gestion budgétaire pour camps de vacances.
                    Partie d'un MVP simple, maintenant en développement complet.
                </p>

                <!-- Tech specs -->
                <div class="flex flex-wrap gap-2 mb-6">
                    <span class="px-2 py-1 border border-cyan-500/30 text-xs font-mono text-cyan-400">Astro</span>
                    <span class="px-2 py-1 border border-cyan-500/30 text-xs font-mono text-cyan-400">Supabase</span>
                    <span class="px-2 py-1 border border-cyan-500/30 text-xs font-mono text-cyan-400">PostgreSQL</span>
                </div>

                <a href="#" class="inline-flex items-center gap-2 text-sm text-cyan-400 font-medium group-hover:text-cyan-300 transition-colors">
                    <span class="border-b border-dashed border-cyan-500/40 group-hover:border-cyan-400">Suivre l'avancement</span>
                    <i class="ri-arrow-right-line transition-transform group-hover:translate-x-1"></i>
                </a>
            </article>

            <!-- Jeux de Société -->
            <article class="group lab-card p-5 relative animate-on-scroll stagger-item">
                <div class="absolute top-2 right-2 flex items-center gap-1">
                    <span class="w-1.5 h-1.5 bg-slate-500 rounded-full"></span>
                    <span class="text-[10px] font-mono text-slate-500 uppercase">Bientôt</span>
                </div>

                <div class="
                    w-11 h-11
                    flex items-center justify-center
                    border border-dashed border-slate-600
                    mb-4
                    group-hover:border-cyan-500/50
                    transition-colors duration-300
                ">
                    <i class="ri-gamepad-line text-xl text-slate-400 group-hover:text-cyan-400 transition-colors"></i>
                </div>
                <h3 class="text-lg font-medium text-white mb-2">Jeux de Société</h3>
                <p class="text-slate-500 text-sm leading-relaxed">
                    Newsletter et projet à venir dans l'univers ludique.
                </p>
            </article>

            <!-- Photographie -->
            <article class="group lab-card p-5 relative animate-on-scroll stagger-item">
                <div class="
                    w-11 h-11
                    flex items-center justify-center
                    border border-dashed border-slate-600
                    mb-4
                    group-hover:border-cyan-500/50
                    transition-colors duration-300
                ">
                    <i class="ri-camera-line text-xl text-slate-400 group-hover:text-cyan-400 transition-colors"></i>
                </div>
                <h3 class="text-lg font-medium text-white mb-2">Photographie</h3>
                <p class="text-slate-500 text-sm leading-relaxed mb-4">
                    Capturer des moments, raconter des histoires.
                </p>
                <a href="#" class="inline-flex items-center gap-1 text-xs text-cyan-400 font-mono">
                    Voir la galerie <i class="ri-arrow-right-up-line"></i>
                </a>
            </article>

            <!-- Badminton -->
            <article class="group lab-card lab-card-accent p-5 relative animate-on-scroll stagger-item">
                <div class="
                    w-11 h-11
                    flex items-center justify-center
                    border border-dashed border-cyan-500/40
                    mb-4
                    bg-cyan-500/10
                ">
                    <i class="ri-ping-pong-line text-xl text-cyan-400"></i>
                </div>
                <h3 class="text-lg font-medium text-white mb-2">Badminton</h3>
                <p class="text-slate-400 text-sm leading-relaxed">
                    Pratique régulière et soutien aux clubs.
                </p>
            </article>

            <!-- Blog - Wide card -->
            <article class="group lab-card md:col-span-2 p-5 relative flex flex-col md:flex-row md:items-center gap-4 animate-on-scroll stagger-item">
                <div class="
                    w-12 h-12
                    flex items-center justify-center
                    border border-dashed border-slate-600
                    group-hover:border-cyan-500/50
                    transition-colors duration-300
                    shrink-0
                ">
                    <i class="ri-quill-pen-line text-xl text-slate-400 group-hover:text-cyan-400 transition-colors"></i>
                </div>
                <div class="flex-1">
                    <h3 class="text-lg font-medium text-white mb-1">Blog & Réflexions</h3>
                    <p class="text-slate-500 text-sm">
                        Tech, création, jeux, crypto, et tout ce qui m'inspire.
                    </p>
                </div>
                <a
                    href="/blog/"
                    class="
                        inline-flex items-center gap-2
                        px-4 py-2
                        border border-cyan-500/50
                        text-sm font-mono text-cyan-400
                        transition-all duration-300
                        hover:bg-cyan-500/10
                        hover:border-cyan-400
                    "
                >
                    Lire les articles
                    <i class="ri-arrow-right-line"></i>
                </a>
            </article>

        </div>

        <!-- Bottom decorative element -->
        <div class="flex items-center justify-center mt-12">
            <div class="flex items-center gap-2 text-xs font-mono text-slate-600">
                <span class="w-8 h-px bg-slate-700"></span>
                <span>EOF</span>
                <span class="w-8 h-px bg-slate-700"></span>
            </div>
        </div>

    </div>
</section>

<style>
    .lab-section {
        background: linear-gradient(180deg, #0f172a 0%, #1e293b 50%, #0f172a 100%);
    }

    .lab-grid-bg {
        background-image:
            linear-gradient(rgba(34, 211, 238, 0.03) 1px, transparent 1px),
            linear-gradient(90deg, rgba(34, 211, 238, 0.03) 1px, transparent 1px),
            linear-gradient(rgba(34, 211, 238, 0.015) 1px, transparent 1px),
            linear-gradient(90deg, rgba(34, 211, 238, 0.015) 1px, transparent 1px);
        background-size: 100px 100px, 100px 100px, 20px 20px, 20px 20px;
        background-position: -1px -1px, -1px -1px, -1px -1px, -1px -1px;
    }

    .lab-title {
        font-family: 'Komigo3D', 'Space Grotesk', sans-serif;
        text-shadow:
            0 0 40px rgba(34, 211, 238, 0.3),
            0 0 80px rgba(34, 211, 238, 0.1);
        letter-spacing: 0.05em;
    }

    .lab-card {
        background: rgba(30, 41, 59, 0.5);
        border: 1px solid rgba(71, 85, 105, 0.3);
        backdrop-filter: blur(8px);
        transition: all 0.3s ease;
    }

    .lab-card:hover {
        border-color: rgba(34, 211, 238, 0.3);
        background: rgba(30, 41, 59, 0.7);
        transform: translateY(-4px);
        box-shadow: 8px 8px 0px rgba(0, 0, 0, 0.3);
    }

    .lab-card-large {
        background: rgba(30, 41, 59, 0.6);
        border: 1px dashed rgba(71, 85, 105, 0.4);
    }

    .lab-card-large:hover {
        border-color: rgba(34, 211, 238, 0.4);
        border-style: solid;
    }

    .lab-card-accent {
        background: rgba(34, 211, 238, 0.05);
        border-color: rgba(34, 211, 238, 0.2);
    }

    /* Bottle glow effect */
    .bottle-container {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .bottle-icon {
        filter: drop-shadow(0 0 8px rgba(34, 211, 238, 0.4));
        animation: bottle-float 4s ease-in-out infinite;
    }

    .bottle-glow {
        position: absolute;
        inset: -8px;
        background: radial-gradient(
            ellipse at center,
            rgba(34, 211, 238, 0.3) 0%,
            rgba(34, 211, 238, 0.1) 40%,
            transparent 70%
        );
        border-radius: 50%;
        filter: blur(12px);
        z-index: 0;
    }

    .bottle-glow-pulse {
        position: absolute;
        inset: -16px;
        background: radial-gradient(
            ellipse at center,
            rgba(34, 211, 238, 0.25) 0%,
            transparent 60%
        );
        border-radius: 50%;
        filter: blur(20px);
        z-index: 0;
        animation: glow-pulse 2.5s ease-in-out infinite;
    }

    @keyframes glow-pulse {
        0%, 100% {
            opacity: 0.4;
            transform: scale(1);
        }
        50% {
            opacity: 1;
            transform: scale(1.15);
        }
    }

    @keyframes bottle-float {
        0%, 100% {
            transform: translateY(0) rotate(-2deg);
        }
        50% {
            transform: translateY(-6px) rotate(2deg);
        }
    }
</style>

<script>
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('is-visible');
                observer.unobserve(entry.target);
            }
        });
    }, { threshold: 0.1 });

    document.querySelectorAll('#lab .animate-on-scroll').forEach(el => observer.observe(el));
</script>
